<!doctype html>
<html>
    
    <head>
        
        <meta charset="utf-8">

        <title>Mekks</title>
        <meta name="description" content="Description of Mekks">
        
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/styles.css">
		
    </head>

    <body>
        
      <div id="app" class="container-fluid">
          
                <div class="row" id="header">
                    
                    <div class="col-xs-3 text-left">
                        
                        <h3 class="health-label"><span class="label label-primary" id="player-health">
                            <span class="glyphicon glyphicon-heart-empty"></span>   
                            <span class="health-points">100</span>
                        </span></h3>
                        
                    </div>
                    
                    <div class="col-xs-6 text-center">
                        
                        <h3 class="energy-cells">
                            
                            <span class="label label-success energy-cell">
                                <span class="glyphicon glyphicon-flash"></span>
                            </span>
                            
                            <span class="label label-success energy-cell">
                                <span class="glyphicon glyphicon-flash"></span>
                            </span>
                            
                            <span class="label label-success energy-cell">
                                <span class="glyphicon glyphicon-flash"></span>
                            </span>
                            
                        </h3>
                        
                    </div>
                    
                    <div class="col-xs-3 text-right">
                        
                        <h3 class="health-label">
                            
                            <span class="label label-info" id="enemy-health">
                                <span class="glyphicon glyphicon-heart-empty"></span>   
                                <span class="health-points">100</span>
                            </span>
                            
                        </h3>
                        
                    </div>

                    

                </div>

                <div class="row" id="content">
                    
                    <div class="col-xs-6">
                        
                        <div class="mekk" id="player">

                        </div>
                        
                    </div>
                    
                    <div class="col-xs-6">
                        
                        <div class="mekk" id="enemy">

                        </div>
                        
                    </div>
                    
                </div> 
          
                <div class="row" id="footer">
                    
                    <div class="col-xs-6 text-left">
                        
                        <button class="btn btn-warning tinker-btn">
                            <span class="glyphicon glyphicon-cog"></span>
                        </button>
                        
                    </div>
                    
                    <div class="col-xs-6 text-right">
                        
                        <button class="btn btn-danger attack-btn">
                            <span class="glyphicon glyphicon-screenshot"></span>
                        </button>
                        
                    </div>
                    
                </div>
          
            </div>
        
		<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="http://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
        
        
        
        <script type="text/template" id="template-example">
            <div class="template-example" style="position:fixed;left:50%;top:50%;text-align:left;margin-left:-<%= 40/2+templateHTML.length/2 %>ch">template-example loaded with {templateHTML:<%= templateHTML %>}</div>
        </script>
        <script>

         /* _.template example js usage

            // code must be run after DOM & body scripts load if referencing elements
            $(function(root) {

                // underscore is included in Parse.js & Backbone.js as a class member, if it's not in the root scope, use Parse._
                this._ = root._ || Parse._;

                // store the _.template(templateHTML) and call later
                var templateExample = _.template($('#template-example').html());

                // using templateVariable({key:'value'}) to make new templated elements
                var templateExampleElement = templateExample({templateHTML: "HTML Yeah boyeeee"});

                // append the template either directly to the DOM or to a Parse.View
                $('body').append(templateExampleElement);

                // make sure to include a class or id so the templated element can be found with $(selector)
                // $('.template-example').remove();

            }(this));

        end of _.template example */

        </script>
        
        <script>
            
            // code to run on loading of DOM & jQuery or contained in '<body>' scripts
            $(function(){
                
                var rechargeSpeed  = 18000;
                
                
                 var attackButtonToggle = function(){this.toggleClass('disabled')};
                    attackButtonToggle = attackButtonToggle.bind($('.attack-btn'));
                
                function useEnergyCell(cell) {
                    cell = $(cell);
                    if (!cell.hasClass('disabled'))
                    {
                    cell.addClass('disabled');
                cell.removeClass('label-success');
                cell.addClass('label-danger');
                cell.hide();
                var rechargeComplete = function (){
                    this.removeClass('label-danger');
                    this.addClass('label-success');
                    this.removeClass('disabled');
                    if ($('.attack-btn').hasClass('disabled')) {
                        attackButtonToggle()};
                    }
                    rechargeComplete = rechargeComplete.bind(cell);
                    cell.fadeIn(rechargeSpeed,rechargeComplete);
                    }
                }
                
                function energyCellClicked(e) {
                    useEnergyCell($(e.currentTarget));
                }
                
                function attackButtonClicked(e){
                   
                    if (!$('attack-btn').hasClass('disabled'))
                    {
                    var cells = $('.energy-cell').toArray();
                    for (var cell in cells)
                    {
                        if (!$(cells[cell]).hasClass('disabled'))
                        {
                            useEnergyCell(cells[cell]);
                            if ($('.energy-cell.disabled').toArray().length == cells.length)
                            {
                                attackButtonToggle();
                            }
                            return;
                        }
                        }
                    }
                }
                
                $('.attack-btn').on('click',attackButtonClicked);
            
            });
            
        </script>
        
    </body>

</html>
