<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, width=device-width" />

    <title>Mekks: Mekkanic Duels</title>
    <meta name="author" content="Patrick Blaine">

    <script>

    function removeAllActives() {var numberOfActive = document.getElementsByClassName('active').length; for (var i=0; i < numberOfActive; i++){removeClass('active',document.getElementsByClassName('active')[i])}}

    function updateActiveToElement(elementName) {document.getElementsByClassName('active')[0].dataset.element=elementName; removeAllActives(); resetMessage()}

    function getWeakForElement(elementName)
    {
      switch(elementName)
      {
        case "fire":
          return "aqua";
        case "aqua":
          return "leaf";
        case "leaf":
          return "fire";
        default:
          return "";
      }
    }
    
    function getStrongForElement(elementName)
    {
      switch(elementName)
      {
        case "fire":
          return "leaf";
        case "aqua":
          return "fire";
        case "leaf":
          return "aqua";
        default:
          return "";
      }
    }
    
    function tinkerForElement(elementName)
    {
      document.getElementsByClassName('left')[0].disabled=false;
      document.getElementsByClassName('left')[0].innerHTML = getWeakForElement(elementName);
      document.getElementsByClassName('left')[0].dataset.element = getWeakForElement(elementName);
      updateMessage('&nbsp;');
      document.getElementsByClassName('right')[0].disabled=false;
      document.getElementsByClassName('right')[0].innerHTML = getStrongForElement(elementName);
      document.getElementsByClassName('right')[0].dataset.element = getStrongForElement(elementName);
    }

    function addClassToParent(targetClassName,context) {removeAllActives();context.parentNode.className += ' '+targetClassName; 
var message = context.parentNode.dataset.element;
updateMessage(message);
console.log(parseInt(context.parentNode.getElementsByClassName('tinker')[0].innerHTML)+' clicked, element: '+context.parentNode.dataset.element);
}

    function removeClassFromParent(targetClassName,context) {
      var classList = context.parentNode.classList; var className = ''; for (var i = 0; i < classList.length; i++) {if (classList[i] != targetClassName) {className += classList[i]+' '}}; context.parentNode.className = className;console.log(context.parentNode.getElementsByClassName('tinker')[0].innerHTML +' cancelled');
resetMessage();
    }

    function removeClass(targetClassName,context) {
      var classList = context.classList; var className = ''; for (var i = 0; i < classList.length; i++) {if (classList[i] != targetClassName) {className += classList[i]+' '}}; context.className = className; console.log(context.parentNode.getElementsByClassName('tinker')[0].innerHTML +' cancelled');
resetMessage();
    }

    function resetMessage() {
document.getElementsByClassName('message')[0].innerHTML = 'choose a piece to change its element';
console.log('message reset, resetting buttons');
      document.getElementsByClassName('left')[0].disabled=true;
      document.getElementsByClassName('left')[0].innerHTML = '';
      document.getElementsByClassName('left')[0].dataset.element = '';
      document.getElementsByClassName('right')[0].disabled=true;
      document.getElementsByClassName('right')[0].innerHTML = '';
      document.getElementsByClassName('right')[0].dataset.element = '';
    
}

function updateMessage(message) {
document.getElementsByClassName('message')[0].innerHTML = message;
console.log('message changed to: '+message);
}
    </script>

    <style>

      html
      {
        font-size:100%;
      }

      body
      {
        font-size:20px;
        min-height:1em;
        margin:0;
        border:0;
        padding:0;
        -webkit-text-size-adjust:100%;
      }

      #container
      {
        position:absolute;
        top:0;
        bottom:0;
        left:0;
        right:0;
      }

      .labelcell
      {
          text-align: center;
          line-height: 1em;
          height: 100%;
          width: 100%;
          display: table;
      }

      .labelcell * {display: table-cell; vertical-align: middle;
      word-break: break-word; }

      .viewcell
      {
        height: 20%;
        background: white;
        width:100%;
        float:left;
      }

      .mekk
      {
        height:40%;
      }

            .mekkcell
            {
              float: left;
              background: gray;
              height:50%;
              transition: 0.25s all;

              overflow: hidden;
              word-wrap: break-word;
              word-break: break-all;
            }
            
            .mekkcell a
            {
              color:white;
              text-decoration: none;
              text-shadow: 2px 2px 12.5px rgba(0, 0, 0, 1);
            }

            .mekkcell:nth-child(1)
            {
              border-top-left-radius: 100%;
            }

            .mekkcell:nth-child(2)
            {
              border-top-right-radius: 100%;
            }

            .mekkcell:nth-child(3)
            {
              border-bottom-left-radius: 100%;
            }

            .mekkcell:nth-child(4)
            {
              border-bottom-right-radius: 100%;
            }

      .bottombar
      {
        float:none;
        clear:left;
      }

      .bottombar a
      {
        width:20%;
        height:100%;
      }
      
      .left
      {
        border-top-right-radius:100%;
        border-bottom-right-radius:100%;
        border-top-left-radius:0;
        border-bottom-left-radius:0;
      }
      
      .right
      {
        border-top-right-radius:0;
        border-bottom-right-radius:0;
        border-top-left-radius:100%;
        border-bottom-left-radius:100%;
      }
        
        .attack.fire
        {
          border-radius: 0;
          border-top-left-radius:100%;
          border-bottom-left-radius:100%;
        }
        
        .attack.leaf
        {
          border-radius: 0;
        }
        
        .attack.aqua
        {
          border-radius: 0;
          border-top-right-radius:100%;
          border-bottom-right-radius:100%;
        }
    
    [data-element="fire"]
    {
      background:red;
      color:white;
    }
    
    [data-element="leaf"]
    {
      background:green;
      color:white;
    }
    
    [data-element="aqua"]
    {
      background:blue;
      color:white;
    }

      @media (orientation:portrait) {
      /* iPhone portrait */

        .mekkcell
        {
          width: 50%;
        }


        .topbar
        {
          width: 100%;
        }
        
        .bottombar
        {
          padding:10% 0 2.5% 0;
        }

        .mekk
        {
          padding: 0 25%;
          width: 50%;
        }

      .mekkcell.active
      {
        border-radius: 25%;
      }
      
      .mekkcell.active:nth-of-type(1)
      {
        border-top-right-radius: 0;
        border-bottom-left-radius: 0;
      }
      
      .mekkcell.active:nth-of-type(2)
      {
        border-top-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      
      .mekkcell.active:nth-of-type(3)
      {
        border-top-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      
      .mekkcell.active:nth-of-type(4)
      {
        border-top-right-radius: 0;
        border-bottom-left-radius: 0;
      }

      .mekkcell a.cancel
      {
        display:none;
      }

      .mekkcell a.tinker
      {
        display:table-cell;
      }

      .mekkcell.active a.cancel
      {
        display:table-cell;
      }

      .mekkcell.active a.tinker
      {
        display:none;
      }

        .hidden-xs-portrait
        {
          display: none;
        }

      }

      @media (orientation:landscape) {
      /* iPhone landscape */

          .viewcell
          {
            height: 25%;
            width: 100%;
          }

          .mekkcell
          {
            width: 50%;
          }

          .topbar
          {
            width: 50%;
          }

          .mekk
          {
            width: 25%;
            height: 50%;
            padding: 0 12.5%;
          }

          #container
          {
            position:fixed;
            max-height: calc(100vh);
          }
          
          .bottombar
          {
             padding: 5% 0;
          }

          .hidden-xs-landscape
          {
            display: none;
          }

      }

    .hidden
    {
      display:none;
    }

    </style>

  </head>

  <body>

    <div id="container">

      <div class="viewcell topbar labelcell">

              <span>health</span>

      </div>

      <div class="viewcell topbar labelcell">

              <span>energy</span>

      </div>

      <div style="" class="viewcell mekk player">
        <div class="mekkcell labelcell" data-element="fire">
                      <a href="#1" class="hidden-xs-landscape tinker" onclick="addClassToParent('active',this); tinkerForElement(this.parentNode.dataset.element);">&nbsp;</a>
                      <a href="#cancel" class="hidden-xs-landscape cancel " onclick="removeClassFromParent('active',this);">X</a>
                      <span class="hidden-xs-portrait">&nbsp;</span>
              </div>
              <div class="mekkcell labelcell" data-element="leaf">
                      <a href="#2" class="hidden-xs-landscape tinker" onclick="addClassToParent('active',this); tinkerForElement(this.parentNode.dataset.element);">&nbsp;</a>
                      <a href="#cancel" class="hidden-xs-landscape cancel " onclick="removeClassFromParent('active',this)">X</a>
                      <span class="hidden-xs-portrait">&nbsp;</span>
                  </div>
                  <div class="mekkcell labelcell" data-element="aqua">
                      <a href="#3" class="hidden-xs-landscape tinker" onclick="addClassToParent('active',this); tinkerForElement(this.parentNode.dataset.element);">&nbsp;</a>
                      <a href="#cancel" class="hidden-xs-landscape cancel" onclick="removeClassFromParent('active',this)">X</a>
                      <span class="hidden-xs-portrait">&nbsp;</span>
                  </div>
                  <div class="mekkcell labelcell" data-element="leaf">
                      <a href="#4" class="hidden-xs-landscape tinker" onclick="addClassToParent('active',this); tinkerForElement(this.parentNode.dataset.element);">&nbsp;</a>
                      <a href="#cancel" class="hidden-xs-landscape cancel " onclick="removeClassFromParent('active',this)">X</a>
                      <span class="hidden-xs-portrait">&nbsp;</span>
                  </div>










      </div><div class="hidden-xs-portrait viewcell mekk enemy">
              <div class="mekkcell labelcell">
                      <span>&nbsp;</span>
              </div><div class="mekkcell labelcell">

                      <span>&nbsp;</span>
              </div><div class="mekkcell labelcell">

                      <span>&nbsp;</span>
              </div><div class="mekkcell labelcell">

                      <span>&nbsp;</span>
              </div>










      </div>





<div class="viewcell bottombar labelcell">

<span class="hidden-xs-portrait incoming player">player</span>
              <div></div>
              <a class="attack fire hidden-xs-portrait" href="#attack/fire" data-element="fire">fire</a>
              <a class="hidden-xs-landscape left" disabled="true" onclick="updateActiveToElement(this.innerHTML);this.innerHTML='';this.dataset.element='';"></a>
              <div></div>
              <a class="attack leaf hidden-xs-portrait" href="#attack/leaf" data-element="leaf">leaf</a>
              <span class="message hidden-xs-landscape">choose a piece to change its element</span>
              <div></div>
              <a class="attack aqua hidden-xs-portrait" href="#attack/aqua" data-element="aqua">aqua</a>
              <a class="hidden-xs-landscape right" disabled="true"  onclick="updateActiveToElement(this.innerHTML);this.innerHTML='';this.dataset.element='';"></a>
              <div></div>
<span class="hidden-xs-portrait incoming enemy">enemy</span>
          </div>

        </div>


  </body>

</html>
